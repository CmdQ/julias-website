---
import '../styles/global.css';

interface AlternateLinks {
	en?: string;
	de?: string;
}

interface Props {
	lang: 'en' | 'de';
	title: string;
	description?: string;
	alternates?: AlternateLinks;
}

const siteName = "Julia's Portfolio";
const { lang, title, description, alternates = {} }: Props = Astro.props;
const pageTitle = title ? `${title} ¬∑ ${siteName}` : siteName;
const localeNav = {
	en: [
		{ href: '/en/', label: 'Home' },
		{ href: '/en/project-futopia/', label: 'Project Futopia' },
		{ href: '/en/climate-education/', label: 'Climate Education' },
		{ href: '/en/creative-projects/', label: 'Creative Projects' },
		{ href: '/en/contact/', label: 'Contact' },
	],
	de: [
		{ href: '/de/', label: 'Startseite' },
		{ href: '/de/project-futopia/', label: 'Projekt Futopia' },
		{ href: '/de/climate-education/', label: 'Klimabildung' },
		{ href: '/de/creative-projects/', label: 'Kreative Projekte' },
		{ href: '/de/contact/', label: 'Kontakt' },
	],
} as const;

const navItems = localeNav[lang];
const alternatesWithDefaults: AlternateLinks = {
	en: '/en/',
	de: '/de/',
	...alternates,
};
const otherLocale = lang === 'en' ? 'de' : 'en';
const urlFromAlternate = alternatesWithDefaults[otherLocale as keyof AlternateLinks];
const switchHref =
	typeof urlFromAlternate === 'string'
		? urlFromAlternate
		: otherLocale === 'en'
		? '/en/'
		: '/de/';
const canonical = Astro.site ? new URL(Astro.url.pathname, Astro.site).toString() : undefined;
---
<!DOCTYPE html>
<html lang={lang} class="min-h-full bg-brand-bg text-brand-dark">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="generator" content={Astro.generator} />
		<title>{pageTitle}</title>
		{canonical && <link rel="canonical" href={canonical} />}
		{description && <meta name="description" content={description} />}
		{Object.entries(alternatesWithDefaults).map(([locale, href]) => (
			<link rel="alternate" hreflang={locale} href={href ?? '#'} />
		))}
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
	</head>
	<body class="min-h-screen">
		<a href="#main-content" class="absolute left-4 top-4 z-50 inline-flex -translate-y-full rounded bg-white px-4 py-2 text-sm font-semibold text-brand-dark shadow focus:translate-y-0 focus:outline-none focus:ring focus:ring-brand-highlight">
			Skip to content
		</a>
		
		<!-- Hero Image Placeholder - scrolls away -->
		<div class="relative h-64 bg-gradient-to-b from-[rgb(250,248,220)] to-[rgb(237,235,180)] sm:h-80 lg:h-96">
			<div class="absolute inset-0 flex items-center justify-center">
				<div class="text-center">
					<div class="mx-auto mb-4 h-24 w-48 rounded-lg bg-white/50 border-2 border-dashed border-gray-400 flex items-center justify-center">
						<span class="text-sm text-gray-600 font-medium">Header Image Placeholder</span>
					</div>
					<p class="text-sm text-gray-600 italic">Wide format image to be added here</p>
				</div>
			</div>
		</div>

		<!-- Sticky Navigation -->
		<header class="sticky top-0 z-40 bg-[rgb(226,219,70)]">
			<div class="mx-auto flex w-full max-w-6xl flex-col gap-6 px-6 py-8 sm:flex-row sm:items-end sm:justify-between">
				<div>
					<p class="text-sm uppercase tracking-[0.2em] text-brand-dark/70">{lang === 'en' ? "Educator & Artist" : 'P√§dagogin & K√ºnstlerin'}</p>
					<h1 class="m-0 text-3xl font-bold text-brand-dark">Julia Salomon</h1>
				</div>
				<nav aria-label={lang === 'en' ? 'Primary' : 'Hauptnavigation'} class="grid gap-2 text-base sm:grid-cols-5 sm:gap-4">
					{navItems.map((item) => (
						<a
							class="rounded px-3 py-1 text-center font-medium text-brand-dark transition hover:bg-brand-dark/20 focus:bg-brand-dark/30 focus:outline-none focus:ring-2 focus:ring-brand-dark focus:ring-offset-2"
							href={item.href}
						>
							{item.label}
						</a>
					))}
				</nav>
			</div>
		</header>
		<main id="main-content" class="mx-auto w-full max-w-5xl px-6 py-12 sm:px-12">
			<slot />
		</main>
		<footer class="bg-brand-bg">
			<div class="mx-auto flex w-full max-w-5xl flex-col gap-4 px-6 py-8 sm:flex-row sm:items-center sm:justify-between">
				<p class="m-0 text-sm text-brand-dark/70">¬© {new Date().getFullYear()} Julia Salomon</p>
				<a class="inline-flex items-center gap-2 text-sm font-semibold text-brand-dark hover:text-brand-dark/80" href={switchHref}>
					<span aria-hidden="true">üåê</span>
					{lang === 'en' ? 'Deutsch' : 'English'}
				</a>
			</div>
		</footer>
	</body>
</html>
